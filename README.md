# BA_using_eigen
由于秋招面试经常被问到手写BA，和手写EKF，所以做两个小项目练手。

在手写BA之前，用ceres实现一个简单的版本。

ceres主要包含三种求导方式：1. 数值求导； 2. 自动求导； 3. 解析求导。

BA_ceres.cpp中实现了基于数值求导的BA，pose用李代数表示。

自动求导中的雅可比依赖模板类，需要将形参，Eigen<double,n,n>以及指数映射函数中的double都改成T。

解析求导除了实现一个Evaluate函数，手写residual和jacobian外，还需要将pose做局部参数化处理。核心是将李代数更新量加入到新的参数化形式中，如四元数+平移，旋转向量+平移。

为什么pose的局部参数化不直接用李代数实现呢？猜测是因为BCH公式。



